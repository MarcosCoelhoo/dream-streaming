(()=>{"use strict";function e(e){e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"});const{target:a}=e;!async function(e,a){const i=await(await fetch(`https://api.themoviedb.org/3/${a}/${e}?api_key=25ea17bf3ab54060fea05921b6061c3c&language=pt-BR&region=BR`)).json();var n;n={rate:i.vote_average.toFixed(1),year:i.release_date?i.release_date.slice(0,4):i.first_air_date.slice(0,4),backdrop:i.backdrop_path,type:a,title:i.title?i.title:i.name,genres:i.genres,time:"movie"===a?`${i.runtime}min`:`${i.number_of_seasons} season(s)`,id:e,overview:i.overview},function(){const{rate:e,year:a,backdrop:i,type:s,title:o,genres:r,time:c,id:d,overview:l}=n,p=document.querySelector(".section-midia .section-content");if(i){p.innerHTML=`\n      <div class="midia-image">\n      <div class="filter-image"></div>\n      <img src="https://image.tmdb.org/t/p/w780${i}" alt="">\n    </div>\n    <div class="midia-info">\n      <div class="midia-data">\n        <p class="data year">${a}</p>\n        <p class="data time">${c}</p>\n        <div class="rate data year">\n          <p>${e}</p>\n          <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n        </div>\n      </div>\n    \n      <h1 class="midia-title">${o}</h1>\n    \n      <ul class="midia-genres">\n           \n      </ul>\n    \n      <div class="midia-description">\n        <h2 class="section-title">Description</h2>\n    \n        <p class="description-text">${l}</p>\n      </div>\n    </div>\n      `;const n=document.querySelector(".section-midia .midia-genres");r.forEach((e=>{const t=document.createElement("li");t.innerHTML=`<p>${e.name}</p>`,n.appendChild(t)})),document.querySelector(".section-midia").classList.add("active"),document.title=`Dream | ${o}`,async function(e,a){const i=document.querySelector("#section-midia-similar .movie-list");i.children.length&&Array.from(i.children).forEach((e=>{i.removeChild(e)})),(await(await fetch(`https://api.themoviedb.org/3/${e}/${a}/similar?api_key=25ea17bf3ab54060fea05921b6061c3c&language=en&region=BR`)).json()).results.forEach((i=>{t("#section-midia-similar",{rate:i.vote_average.toFixed(1),year:i.release_date?i.release_date.slice(0,4):i.first_air_date.slice(0,4),popularity:i.popularity,image:i.poster_path,type:e,id:a,title:"movie"===e?i.title:i.name})}))}(s,d)}}(),document.querySelector(".back").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".section-midia");document.title="Dream",t.classList.remove("active")}))}(a.dataset.id,a.dataset.type)}))}function t(t,a){!function(){const i=document.querySelector(`${t} .movie-list`),{rate:n,popularity:s,year:o,image:r,id:c,type:d,title:l}=a,p=l.replace(/[\s\W]+/g,"-").toLowerCase();if(r){const t=document.createElement("li");t.innerHTML=`\n    <a href='${p}.html' data-id='${c}' data-type='${d}'>\n  <div class="popular-image movie-image">\n  <img src="https://image.tmdb.org/t/p/w780${r}" alt="">\n</div>\n<div class="movie-content">\n  <div class="movie-rate">\n    <div class="rate">\n      ${n}\n      <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n    </div>\n  </div>\n\n  <div class="movie-info">\n    <div class="info-year">\n      ${o}\n    </div>\n    <div class="info-views">\n      <img src="./assets/icons/eye.svg" alt="" width="16px" height="16px">\n      <p>${s}</p>\n    </div>\n  </div>\n</div>\n</a>\n  `,i.appendChild(t),e(t.querySelector("a"))}}(),function(e){const t=document.querySelectorAll(`${e} [data-control]`),a=document.querySelectorAll(`${e} .movie-list li`),i=a.length;let n=0;function s({target:e}){"left"===e.dataset.control?n-=2:n+=2,n>=i&&(n=0),n<0&&(n=i-1),a.forEach((e=>e.classList.remove(".active"))),a[n].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),a[n].classList.add("active")}a[n].classList.add("active"),t.forEach((e=>{e.addEventListener("click",s)}))}(t)}class a{constructor(e,t,a,i,n,s){this.baseUrl=e,this.apiKey=t,this.category=i,this.imageUrl=a,this.idSection=n,this.typeMidiaFetch=s}getDataMidia(e){return{rate:e.vote_average.toFixed(1),popularity:e.popularity,year:e.release_date?e.release_date.slice(0,4):e.first_air_date.slice(0,4),image:`${this.imageUrl}${e.poster_path}`,backdrop:`${this.imageUrl}${e.backdrop_path}`,id:e.id,type:this.typeMidiaFetch,title:e.title?e.title:e.name}}startFetch(){fetch(`${this.baseUrl}/${this.typeMidiaFetch}/${this.category}?api_key=${this.apiKey}&page=1&language=pt-BR&region=BR`).then((e=>e.json())).then((e=>{e.results.forEach((e=>{const a=this.getDataMidia(e);t(this.idSection,a)}))}))}init(){this.startFetch()}}function i(e,t,a){const i=document.documentElement,n="data-outside";function s({target:o}){e.contains(o)||(e.removeAttribute(n),t.forEach((e=>{i.removeEventListener(e,s)})),a())}e.hasAttribute(n)||t.forEach((t=>{setTimeout((()=>{i.addEventListener(t,s)})),e.setAttribute(n,"")}))}const n="https://api.themoviedb.org/3",s="25ea17bf3ab54060fea05921b6061c3c",o="https://image.tmdb.org/t/p/w780";new a(n,s,o,"popular","#movie-popular","movie").init(),new a(n,s,o,"top_rated","#movie-top-rated","movie").init(),new a(n,s,o,"popular","#serie-popular","tv").init(),new a(n,s,o,"top_rated","#serie-top-rated","tv").init(),function(){const e=document.querySelector('[data-menu="button"]'),t=["touchstart","click"];e.addEventListener("click",(function(){const a=document.querySelector('[data-menu="container"]');e.classList.add("active"),a.classList.add("active"),i(a,t,(()=>{e.classList.remove("active"),a.classList.remove("active")}))}))}(),function(){const e=document.querySelector('[data-search="container"]'),t=document.querySelector('[data-search="container"] input'),a=document.querySelector(".landing-container"),n=document.querySelector("#main-content-container"),s=document.querySelector("#main-search-container"),o=["touchstart","click"];e.addEventListener("click",(function(){e.classList.add("active"),s.classList.add("active"),n.classList.remove("active"),a.classList.remove("active"),i(e,o,(()=>{e.classList.remove("active"),""===t.value&&(s.classList.remove("active"),a.classList.add("active"),n.classList.add("active"))}))}))}(),async function(){const e=document.querySelector(".landing-container .landing-list"),t=+(3*Math.random()+1).toFixed(),a=await(await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=25ea17bf3ab54060fea05921b6061c3c&language=pt-BR&region=BR&page=${t}`)).json(),i=+(Math.random()*a.results.length+1).toFixed(),n=20*(t-1)+i,{vote_average:s,overview:o,release_date:r,backdrop_path:c,title:d}=a.results[i],l=document.createElement("li");l.classList.add("slide-container"),l.innerHTML=`\n    <div class="landing-content">\n            <div class="content-texts">\n            <p class="landing-info">#${n} Popular Movies</p>\n              <h1 class="landing-title">${d}\n              </h1>\n              <p class="landing-description">${o}</p>\n              <footer class="texts-footer">\n                <p class="landing-date" data-landing="date">${r.slice(0,4)}</p>\n                <div class="rate">\n                  ${s.toFixed(1)}\n                  <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n                </div>\n              </footer>\n\n            </div>\n            <div class="landing-button-container">\n              <a href="#" class="landing-button">\n                watch now\n                <img src="./assets/icons/play.svg" alt="icon play button" ">\n                </a>\n              </div>\n            </div>\n            <div class="landing-image">\n                <img src="https://image.tmdb.org/t/p/w780${c}" alt="image of ${d}">\n            </div>\n  `,e.appendChild(l)}(),function(){const e=document.querySelector('[data-search="container"] input'),i=document.querySelector("#main-search-container .section-title"),n=document.querySelector("#main-search-container .movie-list"),{apiKey:s,baseUrl:o}=function(){const e=["#movie-popular","#movie-top-rated"],i=["#serie-popular","#serie-top-rated"],n={baseUrl:"https://api.themoviedb.org/3",apiKey:"25ea17bf3ab54060fea05921b6061c3c",imageUrl:"https://image.tmdb.org/t/p/w780"};return["popular","top_rated"].forEach(((s,o)=>{a(s,e[o],n),async function(e,a,i){const{baseUrl:n,apiKey:s}=i;(await(await fetch(`${n}/tv/${e}?api_key=${s}&page=1&language=pt-BR&region=BR`)).json()).results.forEach((e=>{if(e.backdrop_path){const i={rate:e.vote_average.toFixed(1),popularity:e.popularity,year:e.first_air_date.slice(0,4),backdrop:e.backdrop_path,image:e.poster_path,id:e.id,type:"tv",title:e.name};t(a,i)}}))}(s,i[o],n)})),n}();e.addEventListener("keydown",(function(){setTimeout((()=>{var a;a=e.value,fetch(`${o}/search/movie?api_key=${s}&language=en&region=BR&query=${a}&include_adult=false`).then((e=>e.json())).then((e=>{if(n.children.length){const e=Array.from(n.children);i.innerText="Search by movies",e.forEach((e=>{n.removeChild(e)}))}e.results.forEach((e=>{e.backdrop_path&&t("#main-search-container",{rate:e.vote_average,popularity:e.popularity,year:e.release_date.slice(0,4),backdrop:e.backdrop_path,image:e.poster_path,id:e.id,type:"movie",title:e.title})}))}))}),1e3)}))}()})();