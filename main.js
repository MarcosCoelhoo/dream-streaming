(()=>{"use strict";function e(e,t,a){const i=document.documentElement,n="data-outside";if(!e.hasAttribute(n)){function s({target:o}){e.contains(o)||(e.removeAttribute(n),t.forEach((e=>{i.removeEventListener(e,s)})),a())}t.forEach((t=>{setTimeout((()=>{i.addEventListener(t,s)})),e.setAttribute(n,"")}))}}function t(e){e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"});const{target:t}=e;console.log(t),async function(e,t){const i=await(await fetch(`https://api.themoviedb.org/3/${t}/${e}?api_key=25ea17bf3ab54060fea05921b6061c3c&language=pt-BR&region=BR`)).json();var n;n={rate:i.vote_average.toFixed(1),year:i.release_date?i.release_date.slice(0,4):i.first_air_date.slice(0,4),backdrop:i.backdrop_path,type:t,title:i.title?i.title:i.name,genres:i.genres,time:"movie"===t?`${i.runtime}min`:`${i.number_of_seasons} season(s)`,id:e,overview:i.overview},function(){const{rate:e,year:t,backdrop:i,type:s,title:o,genres:c,time:r,id:l,overview:d}=n,p=document.querySelector(".section-midia .section-content");if(i){p.innerHTML=`\n      <div class="midia-image">\n      <div class="filter-image"></div>\n      <img src="https://image.tmdb.org/t/p/w780${i}" alt="">\n    </div>\n    <div class="midia-info">\n      <div class="midia-data">\n        <p class="data year">${t}</p>\n        <p class="data time">${r}</p>\n        <div class="rate data year">\n          <p>${e}</p>\n          <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n        </div>\n      </div>\n    \n      <h1 class="midia-title">${o}</h1>\n    \n      <ul class="midia-genres">\n           \n      </ul>\n    \n      <div class="midia-description">\n        <h2 class="section-title">Description</h2>\n    \n        <p class="description-text">${d}</p>\n      </div>\n    </div>\n      `;const n=document.querySelector(".section-midia .midia-genres");c.forEach((e=>{const t=document.createElement("li");t.innerHTML=`<p>${e.name}</p>`,n.appendChild(t)})),document.querySelector(".section-midia").classList.add("active"),document.title=`Dream | ${o}`,async function(e,t){const i=document.querySelector("#section-midia-similar .movie-list");i.children.length&&Array.from(i.children).forEach((e=>{i.removeChild(e)})),(await(await fetch(`https://api.themoviedb.org/3/${e}/${t}/similar?api_key=25ea17bf3ab54060fea05921b6061c3c&language=en&region=BR`)).json()).results.forEach((i=>{a("#section-midia-similar",{rate:i.vote_average.toFixed(1),year:i.release_date?i.release_date.slice(0,4):i.first_air_date.slice(0,4),popularity:i.popularity,image:i.poster_path,type:e,id:t,title:"movie"===e?i.title:i.name})}))}(s,l)}}(),document.querySelector(".back").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".section-midia");document.title="Dream",t.classList.remove("active")}))}(t.dataset.id,t.dataset.type)}))}function a(e,a){!function(){const i=document.querySelector(`${e} .movie-list`),{rate:n,popularity:s,year:o,image:c,id:r,type:l,title:d,backdrop:p}=a,m=d.replace(/[\s\W]+/g,"-").toLowerCase();if(c){const e=document.createElement("li");e.innerHTML=`\n    <a href='${m}.html' data-id='${r}' data-type='${l}'>\n  <div class="popular-image movie-image">\n  <img src="https://image.tmdb.org/t/p/w780${c}" alt="">\n</div>\n<div class="movie-content">\n  <div class="movie-rate">\n    <div class="rate">\n      ${n}\n      <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n    </div>\n  </div>\n\n  <div class="movie-info">\n    <div class="info-year">\n      ${o}\n    </div>\n    <div class="info-views">\n      <img src="./assets/icons/eye.svg" alt="" width="16px" height="16px">\n      <p>${s}</p>\n    </div>\n  </div>\n</div>\n</a>\n  `,i.appendChild(e),t(e.querySelector("a"))}}(),function(e){const t=document.querySelectorAll(`${e} [data-control]`),a=document.querySelectorAll(`${e} .movie-list li`),i=a.length;let n=0;function s({target:e}){"left"===e.dataset.control?n-=2:n+=2,n>=i&&(n=0),n<0&&(n=i-1),a.forEach((e=>e.classList.remove(".active"))),a[n].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),a[n].classList.add("active")}a[n].classList.add("active"),t.forEach((e=>{e.addEventListener("click",s)}))}(e)}function i(){const e=["#movie-popular","#movie-top-rated"],t=["#serie-popular","#serie-top-rated"],i={baseUrl:"https://api.themoviedb.org/3",apiKey:"25ea17bf3ab54060fea05921b6061c3c",imageUrl:"https://image.tmdb.org/t/p/w780"};return["popular","top_rated"].forEach(((n,s)=>{!async function(e,t,i){const{baseUrl:n,apiKey:s}=i;(await(await fetch(`${n}/movie/${e}?api_key=${s}&page=1&language=pt-BR&region=BR`)).json()).results.forEach((e=>{if(e.backdrop_path){const i={rate:e.vote_average.toFixed(1),popularity:e.popularity,year:e.release_date.slice(0,4),image:e.poster_path,backdrop:e.poster_path,id:e.id,type:"movie",title:e.title};a(t,i)}}))}(n,e[s],i),async function(e,t,i){const{baseUrl:n,apiKey:s}=i;(await(await fetch(`${n}/tv/${e}?api_key=${s}&page=1&language=pt-BR&region=BR`)).json()).results.forEach((e=>{if(e.backdrop_path){const i={rate:e.vote_average.toFixed(1),popularity:e.popularity,year:e.first_air_date.slice(0,4),backdrop:e.backdrop_path,image:e.poster_path,id:e.id,type:"tv",title:e.name};a(t,i)}}))}(n,t[s],i)})),i}!function(){const t=document.querySelector('[data-menu="button"]'),a=["touchstart","click"];t.addEventListener("click",(function(){const i=document.querySelector('[data-menu="container"]');t.classList.add("active"),i.classList.add("active"),e(i,a,(()=>{t.classList.remove("active"),i.classList.remove("active")}))}))}(),function(){const t=document.querySelector('[data-search="container"]'),a=document.querySelector('[data-search="container"] input'),i=document.querySelector(".landing-container"),n=document.querySelector("#main-content-container"),s=document.querySelector("#main-search-container"),o=["touchstart","click"];t.addEventListener("click",(function(){t.classList.add("active"),s.classList.add("active"),n.classList.remove("active"),i.classList.remove("active"),e(t,o,(()=>{t.classList.remove("active"),""===a.value&&(s.classList.remove("active"),i.classList.add("active"),n.classList.add("active"))}))}))}(),async function(){const e=document.querySelector(".landing-container .landing-list"),t=+(3*Math.random()+1).toFixed(),a=await(await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=25ea17bf3ab54060fea05921b6061c3c&language=pt-BR&region=BR&page=${t}`)).json(),i=+(Math.random()*a.results.length+1).toFixed(),n=20*(t-1)+i,{vote_average:s,overview:o,release_date:c,backdrop_path:r,title:l}=a.results[i],d=document.createElement("li");d.classList.add("slide-container"),d.innerHTML=`\n    <div class="landing-content">\n            <div class="content-texts">\n            <p class="landing-info">#${n} Popular Movies</p>\n              <h1 class="landing-title">${l}\n              </h1>\n              <p class="landing-description">${o}</p>\n              <footer class="texts-footer">\n                <p class="landing-date" data-landing="date">${c.slice(0,4)}</p>\n                <div class="rate">\n                  ${s.toFixed(1)}\n                  <img src="./assets/icons/star.svg" alt="icon star rate" width="13px" height="13px">\n                </div>\n              </footer>\n\n            </div>\n            <div class="landing-button-container">\n              <a href="#" class="landing-button">\n                watch now\n                <img src="./assets/icons/play.svg" alt="icon play button" ">\n                </a>\n              </div>\n            </div>\n            <div class="landing-image">\n                <img src="https://image.tmdb.org/t/p/w780${r}" alt="image of ${l}">\n            </div>\n  `,e.appendChild(d)}(),function(){const e=document.querySelector('[data-search="container"] input'),t=document.querySelector("#main-search-container .section-title"),n=document.querySelector("#main-search-container .movie-list"),{apiKey:s,baseUrl:o}=i();e.addEventListener("keydown",(function(){setTimeout((()=>{var i;i=e.value,fetch(`${o}/search/movie?api_key=${s}&language=en&region=BR&query=${i}&include_adult=false`).then((e=>e.json())).then((e=>{if(n.children.length){const e=Array.from(n.children);t.innerText="Search by movies",e.forEach((e=>{n.removeChild(e)}))}e.results.forEach((e=>{e.backdrop_path&&a("#main-search-container",{rate:e.vote_average,popularity:e.popularity,year:e.release_date.slice(0,4),backdrop:e.backdrop_path,image:e.poster_path,id:e.id,type:"movie",title:e.title})}))}))}),1e3)}))}(),i()})();